<h1>Graph <small> <%= link_to "View Data", active_set_path %> </small> </h1>
<%= javascript_include_tag "//www.google.com/jsapi", "chartkick" %>

<h3> Line Chart </h3>


<%= line_chart @customers.sort_by { |c| c.created_at }.inject(Hash.new(0)) { |k,v| k[v.created_at.strftime("%b, %Y")] += 1; k } %>

<% @hi = @customers.inject(Hash.new(0)) do |h, v|  %>
  <% if v.is_active? %>
    <% h["active"] += 1 %>
  <% else %>
    <% h["inactive"] += 1 %>
    <% end; h %>
  <% end %>


<% @hii = @customers.inject(Hash.new(0)) do |h, v|  %>
  <% if v.has_paid? or v.ever_paid? %>
    <% h["Currently Paid"] += 1 %>
  <% else %>
    <% h["Never paid"] += 1 %>
    <% end; h %>
  <% end %>

  <%= column_chart @hi, discrete: true %>
  <%= column_chart @hii, discrete: true%>

  <% @test = { "Free Trial" => 43, "Paid" => 7 } %>
  <%= column_chart @test,  discrete: true %>

